{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/vinay/Desktop/booking/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/vinay/Desktop/booking/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/vinay/Desktop/booking/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/vinay/Desktop/booking/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\vinay\\\\Desktop\\\\booking\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"axios\";import{useContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import\"./login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState({username:undefined,password:undefined}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var _useContext=useContext(AuthContext),loading=_useContext.loading,error=_useContext.error,dispatch=_useContext.dispatch;var navigate=useNavigate();var handleChange=function handleChange(e){setCredentials(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.id,e.target.value));});};var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"LOGIN_START\"});_context.prev=2;_context.next=5;return axios.post(\"/auth/login\",credentials);case 5:res=_context.sent;dispatch({type:\"LOGIN_SUCCESS\",payload:res.data.details});navigate(\"/\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);dispatch({type:\"LOGIN_FAILURE\",payload:_context.t0.response.data});case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function handleClick(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"lContainer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",id:\"username\",onChange:handleChange,className:\"lInput\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",id:\"password\",onChange:handleChange,className:\"lInput\"}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,onClick:handleClick,className:\"lButton\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"span\",{children:error.message})]})});};export default Login;","map":{"version":3,"sources":["C:/Users/vinay/Desktop/booking/client/src/pages/login/Login.jsx"],"names":["axios","useContext","useState","useNavigate","AuthContext","Login","username","undefined","password","credentials","setCredentials","loading","error","dispatch","navigate","handleChange","e","prev","target","id","value","handleClick","preventDefault","type","post","res","payload","data","details","response","message"],"mappings":"qnBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,OAArC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,WAAT,KAA4B,2BAA5B,CACA,MAAO,aAAP,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClB,cAAsCH,QAAQ,CAAC,CAC7CI,QAAQ,CAAEC,SADmC,CAE7CC,QAAQ,CAAED,SAFmC,CAAD,CAA9C,wCAAOE,WAAP,eAAoBC,cAApB,eAKA,gBAAqCT,UAAU,CAACG,WAAD,CAA/C,CAAQO,OAAR,aAAQA,OAAR,CAAiBC,KAAjB,aAAiBA,KAAjB,CAAwBC,QAAxB,aAAwBA,QAAxB,CAEA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAEA,GAAMY,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BN,cAAc,CAAC,SAACO,IAAD,wCAAgBA,IAAhB,wBAAuBD,CAAC,CAACE,MAAF,CAASC,EAAhC,CAAqCH,CAAC,CAACE,MAAF,CAASE,KAA9C,IAAD,CAAd,CACD,CAFD,CAIA,GAAMC,CAAAA,WAAW,0FAAG,iBAAOL,CAAP,0HAClBA,CAAC,CAACM,cAAF,GACAT,QAAQ,CAAC,CAAEU,IAAI,CAAE,aAAR,CAAD,CAAR,CAFkB,sCAIEvB,CAAAA,KAAK,CAACwB,IAAN,CAAW,aAAX,CAA0Bf,WAA1B,CAJF,QAIVgB,GAJU,eAKhBZ,QAAQ,CAAC,CAAEU,IAAI,CAAE,eAAR,CAAyBG,OAAO,CAAED,GAAG,CAACE,IAAJ,CAASC,OAA3C,CAAD,CAAR,CACAd,QAAQ,CAAC,GAAD,CAAR,CANgB,iFAQhBD,QAAQ,CAAC,CAAEU,IAAI,CAAE,eAAR,CAAyBG,OAAO,CAAE,YAAIG,QAAJ,CAAaF,IAA/C,CAAD,CAAR,CARgB,qEAAH,kBAAXN,CAAAA,WAAW,4CAAjB,CAaA,mBACE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,YAAf,wBACE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,UAFd,CAGE,EAAE,CAAC,UAHL,CAIE,QAAQ,CAAEN,YAJZ,CAKE,SAAS,CAAC,QALZ,EADF,cAQE,cACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,EAAE,CAAC,UAHL,CAIE,QAAQ,CAAEA,YAJZ,CAKE,SAAS,CAAC,QALZ,EARF,cAeE,eAAQ,QAAQ,CAAEJ,OAAlB,CAA2B,OAAO,CAAEU,WAApC,CAAiD,SAAS,CAAC,SAA3D,mBAfF,CAkBGT,KAAK,eAAI,sBAAOA,KAAK,CAACkB,OAAb,EAlBZ,GADF,EADF,CAwBD,CAnDD,CAqDA,cAAezB,CAAAA,KAAf","sourcesContent":["import axios from \"axios\";\nimport { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport \"./login.css\";\n\nconst Login = () => {\n  const [credentials, setCredentials] = useState({\n    username: undefined,\n    password: undefined,\n  });\n\n  const { loading, error, dispatch } = useContext(AuthContext);\n\n  const navigate = useNavigate()\n\n  const handleChange = (e) => {\n    setCredentials((prev) => ({ ...prev, [e.target.id]: e.target.value }));\n  };\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n    dispatch({ type: \"LOGIN_START\" });\n    try {\n      const res = await axios.post(\"/auth/login\", credentials);\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data.details });\n      navigate(\"/\")\n    } catch (err) {\n      dispatch({ type: \"LOGIN_FAILURE\", payload: err.response.data });\n    }\n  };\n\n\n  return (\n    <div className=\"login\">\n      <div className=\"lContainer\">\n        <input\n          type=\"text\"\n          placeholder=\"username\"\n          id=\"username\"\n          onChange={handleChange}\n          className=\"lInput\"\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          id=\"password\"\n          onChange={handleChange}\n          className=\"lInput\"\n        />\n        <button disabled={loading} onClick={handleClick} className=\"lButton\">\n          Login\n        </button>\n        {error && <span>{error.message}</span>}\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}